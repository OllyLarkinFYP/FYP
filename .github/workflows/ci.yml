name: CI

on: pull_request

jobs:
    build-front-end:
        strategy:
            matrix:
                os: ["windows-latest", "macos-latest"]
        runs-on: ${{ matrix.os }}
        steps:
            - name: Checkout code
              uses: actions/checkout@v2
            - name: Install Node
              uses: actions/setup-node@v1
              with:
                  node-version: 14
            - name: Build
              run: |
                  cd front-end
                  npm i
                  npm run build

    build-back-end:
        strategy:
            matrix:
                os: ["windows-latest", "macos-latest"]
        runs-on: ${{ matrix.os }}
        steps:
            - name: Checkout code
              uses: actions/checkout@v2
            - name: Install Dotnet
              uses: actions/setup-dotnet@v1
              with:
                  dotnet-version: "5.0.x"
            - name: Build
              run: |
                  cd back-end
                  dotnet build

    build-and-test-front-end:
        runs-on: "ubuntu-latest"
        steps:
            - name: Checkout code
              uses: actions/checkout@v2
            - name: Install Node
              uses: actions/setup-node@v1
              with:
                  node-version: 14
            - name: Install Dotnet
              uses: actions/setup-dotnet@v1
              with:
                  dotnet-version: "5.0.x"
            - name: Build
              run: |
                  cd front-end
                  npm i
                  npm run build
            - name: Test
              run: |
                  cd front-end
                  npm run test
